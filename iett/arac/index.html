<!DOCTYPE html>
<html lang="tr">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>İETT | Araç</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script>
        var JSON_data;
        $.getJSON('http://iett-api.buraknezir.repl.co/FiloAracKonum.json', function(data) {
            JSON_data = data;
        });;

        function updateBusNumber() {
            kapiNo = document.getElementById("kapinoinput").value;
            var i = 0;
            for (var key in JSON_data) {
                if (JSON_data[key].KapiNo == kapiNo) {
                    document.getElementById("businfo").innerHTML = "<h2>"
                        + "Kapı Kodu: " + JSON_data[key].KapiNo + "<br>"
                        + "Operatör: " + JSON_data[key].Operator + "<br>"
                        + "Garaj: " + JSON_data[key].Garaj + "<br>"
                        + "Son Sinyal: " + JSON_data[key].Saat + "<br>"
                        + "Plaka: " + JSON_data[key].Plaka + "<br>"
                        + "Enlem-Boylam: " + JSON_data[key].Enlem + JSON_data[key].Boylam + "<br>" + "</h2>"
                    i++;
                }
            }

            if (i == 0) {
                document.getElementById("businfo").innerHTML = "<h2>Kapı kodu geçersiz</h2>"
            }
        }

        function onChangeInput() {
            document.getElementById("businfo").innerHTML = "<h2>Kapı kodu girin</h2>"
        }
    </script>
	<style>
		#kapinoinputdiv {
			display: none;
			flex-direction: column;
		}
	</style>
</head>
<body>
	<h1>İETT Filo-Garaj</h1>
	<p>İETT filosundaki araçların kapı kodlarına göre garaj, operatör, plaka, konum ve son sinyal bilgileri
    <br>
    <br>
	<i><b>ÖHO</b> ve <b>OAŞ</b> araçlarının garajları <b>"null"</b> olarak gözükmektedir.</i>
    <br>
	<i><b>Sultangazi Garajı</b>'na bağlı araçların garajları <b>"null"</b> olarak gözükmektedir.</i>
    <br>
	<i><b>Adalar</b>'daki araçların garajları <b>"null"</b> olarak gözükmektedir.</i>
	<br>
	<div id="kapinoinputdiv" style="display: flex;">
		<input type="text" id="kapinoinput" onkeyup="onChangeInput(); this.value = this.value.toUpperCase();" placeholder="Kapı Kodu (örn: O1001)">
		<button onclick="updateBusNumber()">Ara</button>
	</div>
	<hr>
	<div id="businfo">
		<h2>Kapı kodu girin</h2>
	</div>
</body>
</html>